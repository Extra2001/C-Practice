```
日期：2021/05/21
题目链接：https://www.luogu.com.cn/problem/P1838
负责人：荆煦添
考察点：二维数组
```

### 题目分析

本题就是判断三子棋的几种获胜形式。由于$3*3$的棋盘非常简单，我们可以列举所有的获胜情况。

1. 横向连成一条线
2. 纵向连成一条线
3. 从左下到右上连成一条线
4. 从右下到左上连成一条线。

但是！醒醒，我们的棋盘还不存在呢！做这道题的第一步就是将输入的各个数字映射到棋盘上。

当然，如果你觉得方便的话，本题甚至无需使用二维数组，直接对输入数据进行判断即可。

### 将输入数字映射到棋盘

首先，我们定义一个棋盘如下：
```c
int map[5][5] = {0};
// 什么？你问我问什么3*3的棋盘要定义5*5？
```
观察输入的数字，仅存在$123456789$。我们定义：输入数字除以$3$就是第几行。那么第几列就是由输入数字对$3$取模。但是这样会出现问题：`3/3 == 1`，但是$3$属于第一行呀！`3%3 == 0`，但是$3$属于第3列呀！

相信聪明的你已经发现了，**将输入数字都减1**就没有什么问题了。

然后观察输入样例，发现：哎？怎么数字都是粘在一起的？那只能按字符读取了：
```c
int cnt = 0;// 记录读取数字的个数
char tmp;
while (~scanf("%c", &tmp))
{
    if (isdigit(tmp)) //读取后判断一下是否是数字字符，函数在ctype.h
    {
        cnt++; 
        int inttmp = tmp - '0' - 1; // 字符的数字转换为实际的数字-1，ASCII码的运算
        if (cnt & 1) // 奇数。二进制以1结尾就是奇数
            map[inttmp / 3][inttmp % 3] = 1; // 以1记录小a
        else
            map[inttmp / 3][inttmp % 3] = 2; // 以2记录uim
    }
}
```
至此为止，棋盘构造好了。

### 判断胜负
现在，我们就要判断胜负啦！

首先考虑：横向连成一排的情况：
因为有$3$行，我们循环判断$3$次，用`out`变量记录获胜的人。
```c
int out = 0;
// 每一行都判断一下：是否三个元素全部相同。相同则记录。
for (int i = 0; i < 3; i++)
    if ((map[i][0] == map[i][1]) && (map[i][0] == map[i][2]))
            out = map[i][0];
```
但是，这样会出现严重的问题！
假如如下情况，则会记录为$0$：
|     | 列1 | 列2 | 列3 |
|-----|-----|-----|-----|
| 行1 | 1   | 2   | 0   |
| 行2 | 1   | 2   | 0   |
| 行3 | 1   | 0   | 0   |
因此我们需要判断一下单元格的值是否为$0$：
```c
for (int i = 0; i < 3; i++)
    if ((map[i][0] == map[i][1]) && (map[i][0] == map[i][2]))
        if (map[i][0])
            out = map[i][0];
```
对于每一列，仅需将上述代码行列互换一下就OK。

对角线只有两种，主对角线和副对角线。单独判断一下就OK。

### 代码如下：

```c
#include <ctype.h>
#include <stdio.h>

int map[5][5];
int main()
{
    int cnt = 0;
    char tmp;
    while (~scanf("%c", &tmp))
    {
        if (isdigit(tmp))
        {
            cnt++;
            int inttmp = tmp - '0' - 1;
            if (cnt & 1)
                map[inttmp / 3][inttmp % 3] = 1;
            else
                map[inttmp / 3][inttmp % 3] = 2;
        }
    }

    int out = 0;
    for (int i = 0; i < 3; i++)
        if ((map[i][0] == map[i][1]) && (map[i][0] == map[i][2]))
            if (map[i][0])
                out = map[i][0];
    for (int i = 0; i < 3; i++)
        if ((map[0][i] == map[1][i]) && (map[0][i] == map[2][i]))
            if (map[0][i])
                out = map[0][i];
    if ((map[0][0] == map[1][1]) && (map[0][0] == map[2][2]))
        if (map[0][0])
            out = map[0][0];
    if ((map[0][2] == map[1][1]) && (map[0][2] == map[2][0]))
        if (map[0][2])
            out = map[0][2];

    if (out == 1)
        printf("xiaoa wins.");
    else if (out == 2)
        printf("uim wins.");
    else
        printf("drew.");
}
```